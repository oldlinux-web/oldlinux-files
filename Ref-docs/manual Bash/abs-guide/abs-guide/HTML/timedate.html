<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Time / Date Commands</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REL="HOME"
TITLE="Advanced Bash-Scripting Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="External Filters, Programs and Commands"
HREF="external.html"><LINK
REL="PREVIOUS"
TITLE="Complex Commands"
HREF="moreadv.html"><LINK
REL="NEXT"
TITLE="Text Processing Commands"
HREF="textproc.html"><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"><LINK
REL="stylesheet"
HREF="common/kde-common.css"
TYPE="text/css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=iso-8859-1"><META
HTTP-EQUIV="Content-Language"
CONTENT="en"><LINK
REL="stylesheet"
HREF="common/kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"><LINK
REL="stylesheet"
HREF="common/kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#AA0000"
VLINK="#AA0055"
ALINK="#AA0000"
STYLE="font-family: sans-serif;"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Advanced Bash-Scripting Guide: An in-depth exploration of the art of shell scripting</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="moreadv.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 12. External Filters, Programs and Commands</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="textproc.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="TIMEDATE"
>12.3. Time / Date Commands</A
></H1
><DIV
CLASS="VARIABLELIST"
><P
><B
><A
NAME="TDLISTING1"
></A
>Command Listing</B
></P
><DL
><DT
><A
NAME="DATEREF"
></A
><B
CLASS="COMMAND"
>date</B
></DT
><DD
><P
>Simply invoked, <B
CLASS="COMMAND"
>date</B
> prints the date and
	      time to <TT
CLASS="FILENAME"
>stdout</TT
>. Where this command gets
	      interesting is in its formatting and parsing options.</P
><DIV
CLASS="EXAMPLE"
><HR><A
NAME="EX51"
></A
><P
><B
>Example 12-7. Using <B
CLASS="COMMAND"
>date</B
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;#!/bin/bash
   2&nbsp;# Exercising the 'date' command
   3&nbsp;
   4&nbsp;echo "The number of days since the year's beginning is `date +%j`."
   5&nbsp;# Needs a leading '+' to invoke formatting.
   6&nbsp;# %j gives day of year.
   7&nbsp;
   8&nbsp;echo "The number of seconds elapsed since 01/01/1970 is `date +%s`."
   9&nbsp;#  %s yields number of seconds since "UNIX epoch" began,
  10&nbsp;#+ but how is this useful?
  11&nbsp;
  12&nbsp;prefix=temp
  13&nbsp;suffix=`eval date +%s`  # The "+%s" option to 'date' is GNU-specific.
  14&nbsp;filename=$prefix.$suffix
  15&nbsp;echo $filename
  16&nbsp;#  It's great for creating "unique" temp filenames,
  17&nbsp;#+ even better than using $$.
  18&nbsp;
  19&nbsp;# Read the 'date' man page for more formatting options.
  20&nbsp;
  21&nbsp;exit 0</PRE
></TD
></TR
></TABLE
><HR></DIV
></DD
><DT
><B
CLASS="COMMAND"
>zdump</B
></DT
><DD
><P
>Echoes the time in a specified time zone.</P
><P
>	      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>bash$ </TT
><TT
CLASS="USERINPUT"
><B
>zdump EST</B
></TT
>
 <TT
CLASS="COMPUTEROUTPUT"
>EST  Tue Sep 18 22:09:22 2001 EST</TT
>
 	      </PRE
></TD
></TR
></TABLE
>
	      </P
></DD
><DT
><A
NAME="TIMREF"
></A
><B
CLASS="COMMAND"
>time</B
></DT
><DD
><P
>Outputs very verbose timing statistics for executing a command.</P
><P
><TT
CLASS="USERINPUT"
><B
>time ls -l /</B
></TT
> gives something like this:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="COMPUTEROUTPUT"
>0.00user 0.01system 0:00.05elapsed 16%CPU (0avgtext+0avgdata 0maxresident)k
 0inputs+0outputs (149major+27minor)pagefaults 0swaps</TT
></PRE
></TD
></TR
></TABLE
>
	  </P
><P
>See also the very similar <A
HREF="internal.html#TIMESREF"
>times</A
> command in the previous
	    section.</P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>As of <A
HREF="bash2.html#BASH2REF"
>version 2.0</A
>
	    of Bash, <B
CLASS="COMMAND"
>time</B
> became a shell reserved word,
	    with slightly altered behavior in a pipeline.</P
></TD
></TR
></TABLE
></DIV
></DD
><DT
><A
NAME="TOUCHREF"
></A
><B
CLASS="COMMAND"
>touch</B
></DT
><DD
><P
>Utility for updating access/modification times of a
	      file to current system time or other specified time,
	      but also useful for creating a new file. The command
	      <TT
CLASS="USERINPUT"
><B
>touch zzz</B
></TT
> will create a new file
	      of zero length, named <TT
CLASS="FILENAME"
>zzz</TT
>, assuming
	      that <TT
CLASS="FILENAME"
>zzz</TT
> did not previously exist.
	      Time-stamping empty files in this way is useful for
	      storing date information, for example in keeping track of
	      modification times on a project.
	      </P
><P
>The <B
CLASS="COMMAND"
>touch</B
> command is equivalent to
	      <TT
CLASS="USERINPUT"
><B
>: &#62;&#62; newfile</B
></TT
> (for ordinary
	      files).</P
></DD
><DT
><A
NAME="ATREF"
></A
><B
CLASS="COMMAND"
>at</B
></DT
><DD
><P
>The <B
CLASS="COMMAND"
>at</B
> job control command executes
	      a given set of commands at a specified time. Superficially,
	      it resembles <A
HREF="system.html#CRONREF"
>crond</A
>, however,
	      <B
CLASS="COMMAND"
>at</B
> is chiefly useful for one-time execution
	      of a command set.</P
><P
><TT
CLASS="USERINPUT"
><B
>at 2pm January 15</B
></TT
> prompts for a set of
	      commands to execute at that time. These commands should be
	      shell-script compatible, since, for all practical
	      purposes, the user is typing in an executable shell
	      script a line at a time.	Input terminates with a <A
HREF="special-chars.html#CTLDREF"
>Ctl-D</A
>.</P
><P
>Using either the <TT
CLASS="OPTION"
>-f</TT
> option or input
	      redirection (<SPAN
CLASS="TOKEN"
>&#60;</SPAN
>), <B
CLASS="COMMAND"
>at</B
>
	      reads a command list from a file. This file is an
	      executable shell script, though it should, of course,
	      be noninteractive. Particularly clever is including the
	      <A
HREF="extmisc.html#RUNPARTSREF"
>run-parts</A
> command in
	      the file to execute a different set of scripts.</P
><P
>	      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>bash$ </TT
><TT
CLASS="USERINPUT"
><B
>at 2:30 am Friday &#60; at-jobs.list</B
></TT
>
 <TT
CLASS="COMPUTEROUTPUT"
>job 2 at 2000-10-27 02:30</TT
>
 	      </PRE
></TD
></TR
></TABLE
>
	    </P
></DD
><DT
><B
CLASS="COMMAND"
>batch</B
></DT
><DD
><P
>The <B
CLASS="COMMAND"
>batch</B
> job control command is similar to
	      <B
CLASS="COMMAND"
>at</B
>, but it runs a command list when the system
	      load drops below <TT
CLASS="LITERAL"
>.8</TT
>. Like
	      <B
CLASS="COMMAND"
>at</B
>, it can read commands from a file with the
	      <TT
CLASS="OPTION"
>-f</TT
> option.</P
></DD
><DT
><B
CLASS="COMMAND"
>cal</B
></DT
><DD
><P
>Prints a neatly formatted monthly calendar to
	      <TT
CLASS="FILENAME"
>stdout</TT
>. Will do current year or a large
	      range of past and future years.</P
></DD
><DT
><B
CLASS="COMMAND"
>sleep</B
></DT
><DD
><P
>This is the shell equivalent of a wait loop. It pauses for a
	      specified number of seconds, doing nothing. This can be useful for
	      timing or in processes running in the background, checking for a
	      specific event every so often (see <A
HREF="debugging.html#ONLINE"
>Example 30-5</A
>).
	      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;sleep 3
   2&nbsp;# Pauses 3 seconds.</PRE
></TD
></TR
></TABLE
>
	    </P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The <B
CLASS="COMMAND"
>sleep</B
> command defaults to
	      seconds, but minute, hours, or days may also be specified.
	      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;sleep 3 h
   2&nbsp;# Pauses 3 hours!</PRE
></TD
></TR
></TABLE
>
            </P
></TD
></TR
></TABLE
></DIV
></DD
><DT
><B
CLASS="COMMAND"
>usleep</B
></DT
><DD
><P
><I
CLASS="EMPHASIS"
>Microsleep</I
> (the <SPAN
CLASS="QUOTE"
>"u"</SPAN
>
	      may be read as the Greek <SPAN
CLASS="QUOTE"
>"mu"</SPAN
>, or micro
	      prefix). This is the same as <B
CLASS="COMMAND"
>sleep</B
>,
	      above, but <SPAN
CLASS="QUOTE"
>"sleeps"</SPAN
> in microsecond
	      intervals. This can be used for fine-grain timing, or for
	      polling an ongoing process at very frequent intervals.
	      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   1&nbsp;usleep 30
   2&nbsp;# Pauses 30 microseconds.</PRE
></TD
></TR
></TABLE
>
	    </P
><DIV
CLASS="CAUTION"
><TABLE
CLASS="CAUTION"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The <B
CLASS="COMMAND"
>usleep</B
> command does not
	      provide particularly accurate timing, and is therefore
	      unsuitable for critical timing loops.</P
></TD
></TR
></TABLE
></DIV
></DD
><DT
><B
CLASS="COMMAND"
>hwclock</B
>, <B
CLASS="COMMAND"
>clock</B
></DT
><DD
><P
>The <B
CLASS="COMMAND"
>hwclock</B
> command accesses or
	      adjusts the machine's hardware clock. Some
	      options require root privileges. The
	      <TT
CLASS="FILENAME"
>/etc/rc.d/rc.sysinit</TT
> startup file
	      uses <B
CLASS="COMMAND"
>hwclock</B
> to set the system time
	      from the hardware clock at bootup.</P
><P
>The <B
CLASS="COMMAND"
>clock</B
> command is a synonym for
	      <B
CLASS="COMMAND"
>hwclock</B
>.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="moreadv.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="textproc.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Complex Commands</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="external.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Text Processing Commands</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>