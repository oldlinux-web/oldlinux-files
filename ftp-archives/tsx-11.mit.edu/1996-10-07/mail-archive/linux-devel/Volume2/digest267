From:     Digestifier <Linux-Development-Request@senator-bedfellow.mit.edu>
To:       Linux-Development@senator-bedfellow.mit.edu
Reply-To: Linux-Development@senator-bedfellow.mit.edu
Date:     Wed, 5 Oct 94 09:13:08 EDT
Subject:  Linux-Development Digest #267

Linux-Development Digest #267, Volume #2          Wed, 5 Oct 94 09:13:08 EDT

Contents:
  Re: Linux on Pentium P90 PCI---which motherboard? (Kai Leibrandt)
  Question on writing program to access serial ports & buffering (Doug Fields)
  [INFO] Adaptec 274x 284x 294x SCSI adapters (Michael Blair Mathers)
  Re: weird linux hangs 1.0.9 -> 1.1.51 inclusive...  (Steve Kneizys)
  Re: ifmail25 trap.c (Roland Rosenfeld)
  Re: umount problem! (Uwe Bonnes)
  interface handling multiple IPs (Michael Nelson)
  Re: Anyone have info on Colorado Memory Systems' QFA-700 QIC-02 controller? (Rui-Tao Dong 董瑞涛)
  Re: [Wine] "Can't build if1632.o" Now what? (Frank Botte)
  Re: Linux Mud (Wayne Hodgen)
  Re: OpenGL and GLX (Christoph Kukulies)
  Re: What is ELF ? (Mitchum DSouza)
  Re: people using SCSI-IN2000 driver, please read this (Andre Fachat)
  Re: Anyone have info on Colorado Memory System (Kevin Burtch)
  Re: weird linux hangs 1.0.9 -> 1.1.51 inclusive... (Peter Brouwer)

----------------------------------------------------------------------------

Crossposted-To: comp.os.linux.misc
From: Kai.Leibrandt@brunel.ac.uk (Kai Leibrandt)
Subject: Re: Linux on Pentium P90 PCI---which motherboard?
Date: Tue, 4 Oct 1994 18:49:04 GMT

Mikael Lyngvig (milyng@netcom.com) wrote:
: pratt@Sunburn.Stanford.EDU (Vaughan R. Pratt) writes:


: I'm using a Zeos P90 PCI - it has only been a few days since I installed,
: though.  Seems like it runs just fine and smaller load on heavy tasks than
: I get on NETCOM at 3:30 am ;)  I haven't got X to run yet; xinit complains
: about a missing config file.  My configuration is:

:   Zeos P90, 16 MB RAM, 540 MB IDE HD & 340 MB IDE HD, Mitsumi CD-ROM (*),
:   2 * 16550 serial ports, Phoenix BIOS (v4.0??), Diamond Stealth 64 (using
:   the S3 Vision 964 64-bit chip - not tested yet...), Practical Peripherals
:   PM14400FXMT modem - not tested yet), Microsoft mouse (not tested yet).

: I been throught a lot of the standard Unix utils, and they all seem to run
: just fine.

: (*) The Mitsumi drive, as configured by Zeos, needs the command "mcd=0x310,10"
                                                                  ^^^^^^^^^^^^^^
: when booting the Mitsumi kernel otherwise Linux won't recognize the drive.

Try rebuilding your kernel, after having changed the IRQ and BASE_ADDR entries in
/usr/src/linux/include/linux/mcd.h, to whatever you need them to be. You shouldn't
need to manually tell the kernel what's where on rebooring after this.
Hope this is any help,

Kailee.
-- 
____________________________________________________________________

                   Interaction Design Research
____________________________________________________________________

Kai Leibrandt BSc(Hons)                   Kai.Leibrandt@brunel.ac.uk

------------------------------

From: admiral@panix.com (Doug Fields)
Subject: Question on writing program to access serial ports & buffering
Date: 4 Oct 1994 23:28:32 -0400

Hello cyberspace! I'm trying to write a simple program which will write
a string to a modem and dump the results to the screen. This is a prelude
to a more complicated program.

The problem is, from the way that I've set up the serial port, it seems
as if the operating system, Linux 1.1.51, is not buffering the characters
from the modem, so if I don't read them immediately when they are received,
they get lost (overrun).

(Does anyone know of a good reference for this kind of thing other than
getty and comm programs?)

How do I tell the operating system to buffer the incoming characters?
I'm using /dev/cua0 at 2400 BPS. Here is a relevant snippet of code.
How would I modify this code to get the behavior I desire?

Thanks,

Doug             (code follows, comments are C++ style, _filedes has been
                  opened O_RDWR | O_SYNC)


  struct termios modem;

  // Get current modem attributes
  tcgetattr(_filedes, &modem);

  _baud_rate = B2400;
  cfsetospeed(&modem, _baud_rate);
  cfsetispeed(&modem, _baud_rate);
  
  // Set to 7 bits
  modem.c_cflag = (modem.c_cflag & CSIZE) | CS7;

  // Set to raw, no echo mode
  modem.c_iflag &= (IGNBRK | IGNCR | INLCR | ICRNL | IUCLC | 
                     IXANY | IXON | IXOFF | INPCK | ISTRIP);
  modem.c_iflag |= (BRKINT | IGNPAR);
  modem.c_oflag &= OPOST;
  modem.c_lflag = (ICANON | ISIG | ECHO | ECHONL | ECHOE | ECHOK);
  modem.c_cflag |= CREAD | CRTSCTS;
  modem.c_cc[VMIN] = 1;
  modem.c_cc[VTIME] = 0;

  // Turn off all flow control
  modem.c_cflag &= CRTSCTS;
  modem.c_iflag &= IXON;
  
  // Set to even parity
  modem.c_cflag &= (PARENB | PARODD);
  modem.c_cflag |= PARENB;

  // And install the new parameters
  tcsetattr(_filedes, TCSANOW, &modem);

------------------------------

From: mathers2@cps.msu.edu (Michael Blair Mathers)
Subject: [INFO] Adaptec 274x 284x 294x SCSI adapters
Date: 4 Oct 1994 16:46:48 GMT

        There have been several questions about support for these
SCSI adapters.  As I was among many people asking, now that I have
some information it would be wrong of me not to post it.  These
adapters are all essentially the same.  The 274x is EISA version.
The 284x is the VL-Bus version.  And the 294x is the PCI version.
There is an alpha interim driver written that is supposedly fairly
stable.  I have not used it as of yet.  The driver as of now only
supports teh EISA and VL-Bus versions.  Support for the PCI is 
supposed to be coming soon.

The latest version and patches of the driver can be anonymously 
ftp'd from the following ftp site:

ftp.cpsc.calgary.ca    /pub/systems/linux/aha274x

Slackware bootdisks are also included as is more information about
the driver and its future.

-Mike
mathers2@cps.msu.edu
member of MLA (Michigan State Linux Association)

------------------------------

Subject: Re: weird linux hangs 1.0.9 -> 1.1.51 inclusive... 
From: STEVO@acad.ursinus.edu (Steve Kneizys)
Date: 4 Oct 94 12:44:56 EST

Paul Erkkila (pee@cci.com) wrote:

:       We are having a problem with linux "hanging" on out P5 EISA/VLB
: machine. (90 mhz) . General symtoms before the hang are non-exsistent as
: far as I can tell. One minute it's up , and then boom Dead. No console control
: no net access , no cntl-alt-del. It has to be cold booted/ reset. I've read
: other posts to this group complaining of similar occurences, and would like to 
: help sort it out. Is there any kernel logging/ profiling that can be enabled
: so I can log what is going on? Disk space and logging time are NOT a 
: problem and I would really like to get to the bottom of this. I saw the kernel
: profiling option for the configure but I have no idea how to take advantage of
: this option.


: Hardware

: P5-90

: NE2000 ethernet card

: AHA 2842 SCSI (also tried a 1542 same problems)

: 64meg ram

: 30+meg swap ( also tried no swap)

: 4 Seagate 1.1 gig drives 

: Any and all info appreciated ...

: -pee
: -- 

I have had Novell servers crash due to hardware that was not obvious.  
Like a timing bug in the SCSI controller that happened once in a
while, a bad BIOS on a brand new design motherboard, and even 
a video card!  All of these things have caused weird unexplained
hangs on Novell equip, wiht perfectly functioning software.  Since
this is a new Pentium motherboard...is there a way you could put in
a 486 motherboard and keep everything else constant?  No everybody
has such things sitting around (I keep a spare file server or two
handy!)

I just discovered that REALTEK (GOOD) video cards that work fine in
lots of brands of compatibles stopped working on a 486DLC-40 box, a
slight bus timing difference.  Happens only once in a while, but
would make the boxes hang!  How annoying...I have 45 of these boxes.

Good luck.  I *hate* it when it happens to me, but it does all too
often...

Steve...

------------------------------

Date: Mon, 03 Oct 1994 20:54:29 +0100
From: roland@p13.flokiste.fido.de (Roland Rosenfeld)
Subject: Re: ifmail25 trap.c

Hi Champ!

Champ Clark (c-clark@freenet3.scri.fsu.edu) wrote:

>       I am attempting to compile ifmail25,  and have hit some errors
>       ,  namely in iflib/trap.c .   Seems that it gets a "context"
>       error (sorry,  I am at work, and cannot see the errors).
>       This was compiled with slakeware 2.0.0...  

This is a problem with the different Linux-Versions. I have the same
problem and I use Linux 1.0.9. 
Some searching showed me, that the missing type is defined in some
file, which is a linux-kernel-header in 1.1.* and which is only in the
kernel-source upto 1.0.9.

Here's a little workaround:

Patch trap.c with this:
===================== schnipp =============================
--- trap.c     Sun Jul 10 18:35:06 1994
+++ trap.c      Mon Aug 29 01:00:47 1994
@@ -15,6 +15,7 @@
 #include <linux/signal.h>
 #undef __KERNEL__
 #define iBCS2
+#include "sigcontext.h"
 #elif defined(sun)
 #define SUNSTYLE
 #elif defined(SVR4)
===================== schnipp =============================

And then put this _new_ file into ifmail/iflib:

sigcontext.h:
===================== schnipp =============================
struct sigcontext_struct {
        unsigned short gs, __gsh;
        unsigned short fs, __fsh;
        unsigned short es, __esh;
        unsigned short ds, __dsh;
        unsigned long edi;
        unsigned long esi;
        unsigned long ebp;
        unsigned long esp;
        unsigned long ebx;
        unsigned long edx;
        unsigned long ecx;
        unsigned long eax;
        unsigned long trapno;
        unsigned long err;
        unsigned long eip;
        unsigned short cs, __csh;
        unsigned long eflags;
        unsigned long esp_at_signal;
        unsigned short ss, __ssh;
        unsigned long i387;
        unsigned long oldmask;
        unsigned long cr2;
};
===================== schnipp =============================

This works without any problems.

Bye

        Roland

-- 
  * Internet: roland@p13.flokiste.fido.de * Fido: 2:2450/111.13 *


------------------------------

From: bon@lte.e-technik.uni-erlangen.de (Uwe Bonnes)
Subject: Re: umount problem!
Date: Wed, 5 Oct 1994 06:11:17 GMT

Mark D. Roth (roth@ux4.cso.uiuc.edu) wrote:
> I just encountered a weird problem with umount.  I am using the umount
> that comes with the binary distrib of util-linux-1.10 under linux
> 1.1.51.  When I mount a floppy and move files to it (the filesystem
> was ext), and then umount it, is SOMETIMES seg-faults.  Here's the
> output from the syslog:
stuff deleted:

check for the patches on ftp.imag.fr:pub/Linux/ZLIBC.

 The newest (floppy related) files are:
 pub/Linux/ZLIBC/floppy/ALPHA/fdp1.1.51-0410.diff.gz (alpha fixes with new
features)
 pub/Linux/ZLIBC/floppy/QDF/fdp1.1.51-0410.diff.gz (quick&dirty fixes with
lower probability of new bugs)
 pub/Linux/ZLIBC/floppy/misc/dma0410.diff.gz (newest dma patches)
 pub/Linux/ZLIBC/fdutils/ALPHA/fdu0110.taz (utilities)       
-- 
Uwe Bonnes  bon@lte.e-technik.uni-erlangen.de

------------------------------

From: mikenel@netcom.com (Michael Nelson)
Subject: interface handling multiple IPs
Date: Mon, 3 Oct 1994 03:17:55 GMT

What parts of the IP code needs to be changed to allow an interface (eth0) 
to handle multiple IP addresses?

-- Mike
-- 

____________________________________________________________________________
Michael Nelson                                        |   mikenel@netcom.com
Rockville, Maryland                                   |  mikenel@newport.org
       PGP Public Key: Finger or ftp.netcom.com:/pub/mikenel/pubkey.asc

------------------------------

From: rdong@math.uci.edu (Rui-Tao Dong 董瑞涛)
Crossposted-To: comp.os.linux.help
Subject: Re: Anyone have info on Colorado Memory Systems' QFA-700 QIC-02 controller?
Date: 04 Oct 94 17:59:26 GMT


>>>>> On 1 Oct 1994 20:53:34 GMT, c-huegen@crh0033.urh.uiuc.edu (Craig A. Huegen) said:


 c-huegen> Does anyone have any information on Colorado Memory Systems'
 c-huegen> QFA-700 QIC-02 controller/tape drive combo?  I purchased one for
 c-huegen> my DOS machine, but I'd like to be able to use it with Linux.

Well, yes and no.  If you are lucky to find a PC-02 controller, then it
works great.  If you are stuck with the TC-02, I don't think anyone has
figured out how to make it work (yet).  I bought mine from JEM computer in
Cambridge and had to swap the controller from them.

Regards,

    Rui-Tao Dong 董瑞涛                 Department of Mathematics
    rdong@math.uci.edu                      University of California 
    (714)725-2713(O) (714)856-7993(Fax)     Irvine, CA 92717-3875

------------------------------

From: frbo@marvin.central.de (Frank Botte)
Subject: Re: [Wine] "Can't build if1632.o" Now what?
Date: Mon, 3 Oct 1994 11:28:21 GMT

C. Engelmann (engel@yacc.central.de) wrote:
: joel@wam.umd.edu (Joel M. Hoffman) writes:

: >I found a copy of makedepend, which doesn't quite work right but seems
: >to work well enough, and now I'm trying to build a copy of Wine,
: >specifically, wine940912.  But the make keeps dying on if1632.o:

: >     make: *** No rule to make target `if1632.o'.  Stop.

: >Indeed, I can find no if1632 source file.  The README mentions a small
: >change to if1632.S, but I can't find that file anywhere.

: >Now what?

: I had the same problem patching wine to the september edition -
: but I couldn't solve it.
: So I got the full source tree and it works.
: There is a subdirectory named if1632, but there is only
: a file called 'call.S'.

I compiled Wine (940912) successfully.
The only thing I had to do, to get Configure working
was a link from '/usr/X11/lib/X11/config' inside the
Wine directory.
After that Wine compiled well for me.

by
Frank

------------------------------

From: hodgen@informatik.uni-koblenz.de (Wayne Hodgen)
Subject: Re: Linux Mud
Date: 4 Oct 1994 08:19:52 GMT
Reply-To: hodgen@infko.uni-koblenz.de

|> >I've recompiled and run both LambdaMOO and ColdMUD successfulyl under linux.
|> >:)
|> 
|> Add to that list both MUSH and Interlude, and  the author of Interlude
|> just bought  a Linux machine   so  I expect  Interlude/CodaII will  be
|> natively developed on Linux.

And the Mythos team does its home development using the Genesis CD 3.31 LPmud
driver on Linux machines.
-- 
Wayne Hodgen   | hodgen@informatik.uni-koblenz.de | #include <ridiculouslylong
Uni Koblenz,   | or Fight-o-net 2:2454/518.42     | legalesemumbojumbodisclaim
Rheinau 1,     | Voice: +49 261 9119-645          | er||stupidasciipictureover
56075 Koblenz. | Fax:   +49 261 9119-499          | 20linestoannoythenet.cops>

------------------------------

From: kuku@acds.physik.rwth-aachen.de (Christoph Kukulies)
Crossposted-To: comp.windows.x,comp.graphics.opengl,comp.graphics
Subject: Re: OpenGL and GLX
Date: 4 Oct 1994 08:35:43 GMT

Mark Lin (mlin@ERC.MsState.Edu) wrote:
: bryan heidorn (pbh@lis.pitt.edu) wrote:
: : Hello,

: : There have been several posts over the last several weeks/months in 
: : the OpenGL related news groups about running OpenGL on a PC.  I have 
: : not seen much appear about this issue in the Xwindows or Linux groups.  
: : I (and apparently several others) am interested in running GLX, the X 
: : extension for OpenGL, under Linux on my PC with an SGI as the OpenGL server.

: Doesn't the package, "vogle," allow one to perform somewhat smiliar to this?

Note that there are vogl and vogle. These are different though similar.
vogl is a gl implementation of earlier SGI's GL dialects and (I believe)
is not an implementaion of OPENGL. vogle has some extensions that cannot
be found in GL - don't ask me what at the moment. It may be a choice.
OTOH its only a client, that is it does not implement GLX
functionality on the server side.

: --
: ----------                    ----------                   ----------
: Mark Lin                                                 mlin@nwu.edu
: Northwestern University                        Biomedical Engineering


--
--Chris  Christoph P. U. Kukulies    kuku@acds.physik.rwth-aachen.de     
FreeBSD 1.1.0(Current) (GILSYSCONS) #12: Fri Jun  3 13:36:12 MET DST 1994

------------------------------

From: Mitchum.DSouza@mrc-apu.cam.ac.uk (Mitchum DSouza)
Subject: Re: What is ELF ?
Date: 5 Oct 1994 09:23:51 GMT

In article <1994Oct3.151940.8708@sifon.cc.mcgill.ca>,
whitney@christie.Meakins.McGill.CA (Whitney de Vries) writes:
|> 
|> What is ELF ? What other systems use ELF ?
|> Where can I find a description of it ?
|> 

See 
        tsx-11.mit.edu:/pub/linux/packages/GCC/ELF.doc.tar.gz

Mitch

------------------------------

From: fs1@aixterm1.urz.uni-heidelberg.de (Andre Fachat)
Subject: Re: people using SCSI-IN2000 driver, please read this
Date: 4 Oct 1994 16:52:35 GMT


: I can remember there was a kernel-warning:
:  ******bdflush not running*******
: Can anybody explain this warning?
If you don't have bdflush running, you get into trouble with newer kernels.
install it and then try again.

Andre

--
Andre Fachat              mail me!             fachat@galileo.rhein-neckar.de
For some it is MS-Windows, for others it's the longest batch file on earth...

------------------------------

From: kburtch@pts.mot.com (Kevin Burtch)
Subject: Re: Anyone have info on Colorado Memory System
Reply-To: kburtch@pts.mot.com
Date: Mon, 3 Oct 1994 18:32:38 GMT

To: c-huegen@crh0033.urh.uiuc.edu
Subject: Re: Anyone have info on Colorado Memory System
Cc: 

In article l1v@vixen.cso.uiuc.edu, c-huegen@crh0033.urh.uiuc.edu (Craig A. Huegen) writes:
>Does anyone have any information on Colorado Memory Systems' QFA-700 
>QIC-02 controller/tape drive combo?  I purchased one for my DOS machine, 
>but I'd like to be able to use it with Linux.

Ditto, from Jem.  Nice drive, fast, quiet, and great price!

>Problem is, Colorado Memory Systems have since discontinued the product, 
>yet they aren't giving any information on programming the controller card.

Yes, and they are quite rude about it too!

>I'd like to write a device driver for it, if anyone has any information 
>on it.  The controller card uses Stac hardware compression, and is 
>jumperless.

Well, have you contacted the "Tape channel" of the linux developers?
( I can't remember how, but it's in the FAQ :)

Some stuff I learned that *might* help you...  The 350M mode is known as
CMS-350, which is a Colerado-specific standard. It apparently slows the
tape down, while maintaining the same data throughput, to achieve the
higher data density. It still uses the same number of heads as QIC-150
though... so QIC-525(?) is impossible. The controller is known as the PC02,
and there is another known as the TC02 (jumpered, no compression) that will
work with linux, but will limit your drive to QFA-500 storage capacity. 
(QIC-150) 

>Thanks for any help in advance...
>
>--Craig

I hope this helped, as I'd _love_ to use it with linux!

Kevin

P.S. I found an MS-DOS TAR.EXE that is supposed to work with QIC-02 drives...
     it doesn't work either. :(




------------------------------

From: pb@apd.dec.com (Peter Brouwer)
Subject: Re: weird linux hangs 1.0.9 -> 1.1.51 inclusive...
Date: 5 Oct 94 10:30:38 GMT
Reply-To: pb@apd.dec.com (Peter Brouwer)

In <Cx5EAw.ExL@sunsrvr6.cci.com> pee@cci.com (Paul Erkkila) writes:


>       We are having a problem with linux "hanging" on out P5 EISA/VLB
>machine. (90 mhz) . General symtoms before the hang are non-exsistent as


>Hardware

>P5-90

>NE2000 ethernet card

>AHA 2842 SCSI (also tried a 1542 same problems)

Does a NE2000 uses DMA channels? If so does it use the same channel as the AHA
card? A second guess , is the IO address for both cards the same?


--
Regards, Peter Brouwer                 \\\//
pb@apd.dec.com                         (0 0)
===================================oOO==(_)==OOo============================
# Digital Equipment B.V.               / WorkGroup Systems, 
# DIGITAL : HLDEO1::BROUWER_P,829-4218 \ Dep LinkWorks Engineering, P.O.Box 245,
# PHONE:[+31][0]55 43 ext 4218,fax 9133  7300AE Apeldoorn, The Netherlands.

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Development-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.development) via:

    Internet: Linux-Development@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Development Digest
******************************
