From:     Digestifier <Linux-Admin-Request@senator-bedfellow.mit.edu>
To:       Linux-Admin@senator-bedfellow.mit.edu
Reply-To: Linux-Admin@senator-bedfellow.mit.edu
Date:     Sun, 21 Nov 93 12:26:49 EST
Subject:  Linux-Admin Digest #178

Linux-Admin Digest #178, Volume #1               Sun, 21 Nov 93 12:26:49 EST

Contents:
  Re: Berkeley Fast Filesystem (J. Dean Brock)
  Re: Berkeley Fast Filesystem (Wayne Schlitt)
  ftp can't upload .... (Zhuo Er Lin)
  Re: How to reach network? (Donald J. Becker)
  Re: Major/Minor numbers for Ethernet (Donald J. Becker)
  Re: Network reliability? (Justin Botelle)
  Re: ftp can't upload .... (Patrick J. Volkerding)
  Re: Determine Passwords (INN NEWS)
  Re: Network reliability? (Patrick J. Volkerding)
  Ext2 partition corrupt, help! (Craig Ogle)
  Adding a termcap/terminfo entry? (Dennis Lou)
  Re: Slackware 1.1.0 is good! (Andreas Klemm)
  Re: Berkeley Fast Filesystem (Robert Sanders)
  Re: No core dumped? (Nicholas Ambrose)
  Re: Berkeley Fast Filesystem (Matthias Urlichs)
  Re: ftp can't upload .... (Zhuo Er Lin)
  Re: Default shell on login (Christian Weisgerber)
  Re: Linux and Yellow Pages (Dustin Mollo)

----------------------------------------------------------------------------

From: brock@cs.unca.edu (J. Dean Brock)
Crossposted-To: comp.os.linux.development
Subject: Re: Berkeley Fast Filesystem
Date: 21 Nov 1993 02:11:59 GMT

In article <PCG.93Nov14223917@frontb.aber.ac.uk> pcg@aber.ac.uk (Piercarlo Grandi) writes:
>       ...  a lot of stuff about extending files under FFS
>       ...  in response to an earlier message of mine

In my message, I was talking about the allocation of fragments on
the disk.  Piercarlo Grandi seems to be talking about "the really
terrifying details of the consequences of the FFS fragmentation scheme on
incore buffers".  I'll agree that I was terrified.

Again, look at The Design and Implementation of 4.3 BSD for the
details of allocating fragments.  It's all in Section 7.7.
Here's a brief rewording that summarizes the interesting facts.

If a file system has a reasonable amount of space, disk allocation
is being optimized for time.  In this case, the first fragment of
a file is allocated on a best-fit basis.  That is, the system tries
to find an isolated fragment for this file.  When the file grows
into a second fragment, the old and new fragment are placed in
the first two fragments of an empty block.  The file can grow
six more fragments until a new block is needed.  Each time, the
file uses all eight fragments of a block, a new block is allocated
for the next fragments of the file.

If the file system is pretty full, disk allocation is being optimized
for space.  In this case, fragments are allocated on a best-fit
basis as the file grows.  Obviously this can involve a lot of
allocating and de-allocating as the file grows.

So, once again, when allocating fragments on a disk using the
"fast" file systems that descended from BSD:
        Files CAN use multiple fragments.
        A 42k file WILL consist of 8 full blocks and 2 fragments.

------------------------------

From: wayne@backbone.uucp (Wayne Schlitt)
Subject: Re: Berkeley Fast Filesystem
Date: Sat, 20 Nov 1993 14:38:20 GMT

In article <PCG.93Nov19210817@frontb.aber.ac.uk> pcg@aber.ac.uk (Piercarlo Grandi) writes:
> >>> On 19 Nov 93 03:40:20 GMT, a09878@giant.rsoft.bc.ca (Curt Sampson) said:
> 
> Curt> Linux has its advantages over BSD, but the lack of FFS is not one of
> Curt> them.
> 
> Enough with this! the ext2 fs is competitive with the FFS, and with
> Youngdale's clustering diffs soon, I think, to become standard,
> performance is as good or even way better, _without_ all the silly
> complications of fragmentation.


Pardon my ignorance, but does ext2 use something similar to cylinder
groups?  Does it try to put the directory, inodes and data all in the
same general area?


Since ext2 now has synchronous structure updates and clustering,
cylinder groups seem to be one of the last important things that FFS
has that ext2 doesn't have.


-wayne


------------------------------

From: umlin000@ccu.umanitoba.ca (Zhuo Er Lin)
Subject: ftp can't upload ....
Date: Sun, 21 Nov 1993 04:12:41 GMT

I am using ftp program from slackware 1.0

When I run PPP, I can download files at appromitely 1.3K - 1.4K cps.

But I can't 'put or mput' files. 

ftp always says 'bad directory compoents'.  What's this? Note I was
upload a file, not directory.
-- 
========================================================================
|  Eric Lin                        Voice:   (204) 783-2884             |
|    Computer Engineering      FAX Modem:   (204) 783-2884             |
|    University of Manitoba     Internet:   Umlin000@cc.Umanitoba.CA   |

------------------------------

From: becker@super.org (Donald J. Becker)
Subject: Re: How to reach network?
Date: Sat, 20 Nov 1993 06:11:27 GMT

In article <2cj6sm$g4p@pulitzer.eng.sematech.org>,
Michael Poag <poagm@jeeves.eng.sematech.org> wrote:
>
>Maxim Matveev (mmatveev@boi.hp.com) wrote:
>: I try to configure NET-2 stuff and any time then I try to
>: run route or smth other I get "SIOCADDRT: Network unreacheble".
>: I run SLS-1.03 with kernel 0.99pl13. Ethernet card - WD8003EP.
>
>: I can ping my Linux box from other WS on the NET, Linux
>: receive some info about ARP, but no outgoing connection.
>: I've tried to solve this problem by myself, but neiver NET-2-HOWTO,
>: neiver Network Adm. Guide don't help.
>
>Might be that your kernal is still set for the 8013 (16-bit)
>card type.. I remember having to fix something to get mine to work
>
>watch during boot-up to see what type of card it thinks is there.

No, no, no.  "Network is unreachable" is a _software_routing_message, and has
little to do with the hardware.  You are probably missing an /etc/networks
file.



-- 

Donald Becker                                          becker@super.org
IDA Supercomputing Research Center
17100 Science Drive, Bowie MD 20715                        301-805-7482

------------------------------

From: becker@super.org (Donald J. Becker)
Subject: Re: Major/Minor numbers for Ethernet
Date: Sat, 20 Nov 1993 06:37:53 GMT

In article <2cfc5q$a2s@klaava.helsinki.fi>,
Tero Laakkonen <laakkone@klaava.Helsinki.FI> wrote:
>In <1993Nov17.182326.5857@swan.pyr> iiitac@swan.pyr (Alan Cox) writes:
>
>>In article <CGLwoy.C7x@boi.hp.com> mmatveev@boi.hp.com (Maxim Matveev) writes:
>>>Can anyone say me the correct major/minor pairs for LANCE and DE-600
>>>pocket Ethernet adapter. I run SLS 1.03 with 0.99pl13. ANd only 
>>>devices for WD and 3Com cards are in /dev/. I read NET-2-HOWTO - no
>>>information.
>>This comes up again and again. You don't need no /dev entries or anything
>>of the sort unless you are playing with Fred Van Kempens NET2E code. Neither
>>2D (in Slackware/SLS/...) nor NET2Debugged (in pl13f-r  [ALPHA pl14]) need
>>the dev entries.
>
>real cool. could somebody explain *why* they're not needed?

The network device names exist only in the socket namespace.  At first glance
this might not seem very clean, after all isn't the filesystem the One True
Unix Namespace?

The answer is that there isn't much you can sensibly do with a device like
"/dev/wd0".  It doesn't make sense to have it encode anything about the
hardware*, and you can't really read or write to it**.  About the only thing
you can do is open(), close(), and ioctl()*** it, and open/close don't have
the right start/stop semantics.

                                Don

* On a Sun /dev/le0 refers to a built-in LANCE ethernet controller, and there
are only a few alternate addresses or devices types (like the Intel ethernet
controller, /dev/ie0) to select from.  On a ISA bus machine there are too many
different device types and addresses to encode anything about the physical
device.  I've written drivers for the 3c501, 3c503, 3c507, 3c509, WD80*3,
, PureData, SMC Ultra, NE1000/NE2000, HP272** series, PCnet/ISA LANCE,
EtherExpress, AT1700, AC3200 and others.  Many of these drivers support
numerous variations, and all support multiple addresses and interrupt lines.

** Even if you want "raw" access to packets, "raw" can have several meanings.
And such "raw" access would have a complex demultiplexing scheme if multiple
processes had the device open.

*** As Calvin said, verbing weirds language.
-- 

Donald Becker                                          becker@super.org
IDA Supercomputing Research Center
17100 Science Drive, Bowie MD 20715                        301-805-7482

------------------------------

From: botelle@eniac.seas.upenn.edu (Justin Botelle)
Subject: Re: Network reliability?
Date: 21 Nov 1993 04:58:30 GMT

Lawrence Foard (entropy@world.std.com) wrote:
: How good or bad have the latest versions of the net stuff turned out
: to be on the internet? I'm at the point where I need to start hooking
: a number of Linux machines up with TCP/IP and do very large high speed
: file transfers.

When I used SLS last May, I did a little better, but I installed Slackware
in early October, I believe.  The machine has crashed hard twice this week,
requiring reboots.  The first time I was running Xmh remotely (since I'm
still trying to get it configured properly locally). and had Xbiff running..
wasn't doing anything.. looked over and saw that it had hung.

Friday night, I dialed in, telnetted to the linux box.  Then telnetted to
a sun.  From the sun, was typing.. when everything froze.. waited a few 
minutes then hung up modem, redialed.. not only can not telnet into machine,
not even ping-able.  Too bad there isn't a way for me to remotely reboot the
machine.

: The owner of the company keeps asking if we shouldn't be switching
: to BSD since it has functional networking.

: BTW-
:  Has anyone hacked sockets that work by calling KA9Q for Linux?
: -- 
: ------ Legalize:          >--<o | If we where meant to hack God would    . 
: \    /  :-)-~             o>--< | have given us jacks.                  . .
:  \  / You are ~1,000,000,000,000,000 .1ms NAND gates have a nice day.  . . .
:   \/ The true theory of everything will run on a finite turing machine. . . .


Justin

------------------------------

Subject: Re: ftp can't upload ....
From: volkerdi@mhd1.moorhead.msus.edu (Patrick J. Volkerding)
Date: 20 Nov 93 23:05:11 -0600

In article <CGtqD5.7Bp@ccu.umanitoba.ca> umlin000@ccu.umanitoba.ca (Zhuo Er Lin) writes:
>I am using ftp program from slackware 1.0
>
>When I run PPP, I can download files at appromitely 1.3K - 1.4K cps.
>
>But I can't 'put or mput' files. 
>
>ftp always says 'bad directory compoents'.  What's this? Note I was
>upload a file, not directory.

This is a pretty well known bug. Since this comes up from time to time,
I'll add it to the Slackware FAQ.

Here's the workaround:

mput ./*

---
Patrick Volkerding
volkerdi@mhd1.moorhead.msus.edu


------------------------------

From: news@apollo.west.oic.com (INN NEWS)
Subject: Re: Determine Passwords
Date: 20 Nov 1993 21:18:24 -0800

In article <2cm8i0$b0p@cs1.bradley.edu> mojo@cs1.bradley.edu (Tony Bailey) writes:
:I have a user on my linux system that lost his password.  How as root can
:I find out what his pw is w/out changing it?  Is there a util to do this?
:
:--
:                                   /\
:                     Tony Bailey  /  \  mojo@cs1.bradley.edu 

    No, as root you should simply set a new password for your user, tell it
    to him, and let him pick another one for himself.

                                                -Matt


------------------------------

Subject: Re: Network reliability?
From: volkerdi@mhd1.moorhead.msus.edu (Patrick J. Volkerding)
Date: 21 Nov 93 00:16:34 -0600

In article <2cmshm$gcg@netnews.upenn.edu> botelle@eniac.seas.upenn.edu (Justin Botelle) writes:
>Lawrence Foard (entropy@world.std.com) wrote:
>: How good or bad have the latest versions of the net stuff turned out
>: to be on the internet? I'm at the point where I need to start hooking
>: a number of Linux machines up with TCP/IP and do very large high speed
>: file transfers.
>
>When I used SLS last May, I did a little better, but I installed Slackware
>in early October, I believe.  The machine has crashed hard twice this week,
>requiring reboots.  The first time I was running Xmh remotely (since I'm
>still trying to get it configured properly locally). and had Xbiff running..
>wasn't doing anything.. looked over and saw that it had hung.

You don't have the "latest net stuff" :^) - in.telnetd and a couple other
things have been fixed since then. You should get the fixed net utilities
from tsx-11.mit.edu, I think they are in /pub/linux/packages/net/new-net2.

Slackware upgraded to these new versions right after they came out.

---
Patrick Volkerding
volkerdi@mhd1.moorhead.msus.edu

------------------------------

From: ogle@unccsun.uncc.edu (Craig Ogle)
Subject: Ext2 partition corrupt, help!
Date: Sun, 21 Nov 1993 03:41:55 GMT


Hello,

I'm in need of some assistance in repairing my ext2 partition.
Somehow, the descriptor(address) for the block bitmap for group0
got stepped on and points somewhere outside the group. This is
the error I get when running e2fsck (v0.4)...

Block bitmap for group 0 not in group (block 1684104530)...
 ...:descriptors corrupted


Now, when I run...

        % ./e2fsck -av -B 8193 /dev/hda3

The partition gets scanned correctly and no errors are reported.
However, when a then run e2fsck without the '-B 8193' I once 
again get the error discussed above.

This leads me to believe that the super block in group 0 is bad
(but I'm no expert). If this is the case, is there anyway of
using a backup copy of the super block to restore the one in
group 0?

Any advice, suggestions, etc. will be appreciated. I dread the
thought of having to reload ~100 Meg worth of data.

Please mail responses to barry@isscad.com as soon as possible.

Thanks,

-- 
-Harry



------------------------------

From: dlou@sdcc3.ucsd.edu (Dennis Lou)
Crossposted-To: comp.os.linux.help
Subject: Adding a termcap/terminfo entry?
Date: 21 Nov 93 07:56:51 GMT


Hi.

I have a HP 2382a connected to my linux box.  However, Slackware 1.0.5
doesn't seem to know what a hp2392 is.

If I'm using csh/tcsh, do I add an entry to termcap, /usr/lib/terminfo
or both?  Where can I get the entries?  How do I make my programs
(e.g.: vi, more, color ls) aware of the hp2382?

Thanks in advance.  E-mail responses appreciated.

-- 
Dennis Lou             || "But Yossarian, what if everyone thought that way?"
dlou@ucsd.edu          || "Then I'd be crazy to think any other way!"
[backbone]!ucsd!dlou   |+====================================================
dlou@ucsd.BITNET       |Steve Jobs and Steve Wozniak went to my high school.

------------------------------

From: andreas@knobel.knirsch.de (Andreas Klemm)
Subject: Re: Slackware 1.1.0 is good!
Date: 21 Nov 1993 10:38:04 -0000

wdevine@pvcea.pvamu.edu (William Devine II) writes:

>philp@universe.digex.net (Phil Perucci) writes:
>>just keep pressing CTRL-ALT-+ until you get a config you like.  The
>>modes are named "1", "2", etc.  CTRL-ALT-+ cycles through the modes.
>>After you find one/some you like, remove the other modes from the
>>mode line.  I went with mode "20" on my old NEC IId.

>Well, this answers the question i just posted! cool..

A good method to kill monitor and/or grafic card. Be warned !
-- 
Andreas Klemm                 /\/\____ Wiechers & Partner Datentechnik GmbH 
andreas@knobel.knirsch.de ___/\/\/     andreas@sunny.wup.de (Unix Support)

------------------------------

From: gt8134b@prism.gatech.EDU (Robert Sanders)
Subject: Re: Berkeley Fast Filesystem
Date: 21 Nov 93 07:54:24 GMT

wayne@backbone.uucp (Wayne Schlitt) writes:

>Pardon my ignorance, but does ext2 use something similar to cylinder
>groups?  

Yes, ext2fs uses cylinder groups, although the utility of those has
been debated.

--
 _g,  '96 --->>>>>>>>>>   gt8134b@prism.gatech.edu  <<<<<<<<<---  CompSci  ,g_
W@@@W__        |-\      ^        | disclaimer:  <---> "Bow before ZOD!" __W@@@W
W@@@@**~~~'  ro|-<ert s/_\ nders |   who am I???  ^  from Superman  '~~~**@@@@W
`*MV' hi,ocie! |-/ad! /   \ss!!  | ooga ooga!!    |    II (cool)!         `VW*'

------------------------------

From: na2@doc.ic.ac.uk (Nicholas Ambrose)
Crossposted-To: comp.os.linux.development
Subject: Re: No core dumped?
Date: 21 Nov 1993 13:57:58 -0000


In article <2cgic0$nq4@fbi-news.informatik.uni-dortmund.de>, muenx@heike.informatik.uni-dortmund.de (Holger Muenx) writes:
|> 
|> Guten Tag!
|> 
|> During a major upgrade session on weekend I installed the kernel 0.99.13 and
|> libs 4.4.4. Everything seems to work fine, except the fact that programs
|> refuse to dump core.
|> 
|> That's good news, you say.
|> 
|> Not really: Those programs are buggy and cause segmentation faults and other
|> nasty problems. After a segmentation fault I do not find a "core" or
|> "core.<progname>" file anywhere. Moreoever, in the message "Segmentation
|> fault" the usual "core dumped" is omitted.
|> 
|> Does anybody else experience that problem? How can I get rid of it?
|> 
|

perhaps it`s possible that you may have 'limit coredumpsize 0' in your
.bashrc or similar file ?
Nick
-- 
In the long run, every program becomes rococo, and then rubble.
                -- Alan Perlis

------------------------------

From: urlichs@smurf.sub.org (Matthias Urlichs)
Crossposted-To: comp.os.linux.development
Subject: Re: Berkeley Fast Filesystem
Date: 19 Nov 1993 17:23:38 +0100

In comp.os.linux.development, article <2c1796$gt8@gaia.ucs.orst.edu>,
  jacobsd@heart.cor.epa.gov writes:
> 
> The single fragmented block can contain 2, 4, or 8 fragments.  The file
> could be 42k long, but that assumes there is a fragmented block around
> with 2k worth of free fragments (or zero so we make a new fragmented
> block).  Efficiency suffers, but that's the whole point of fragmented
> blocks to begin with -- trade off efficiency of time versus space.  I
> don't really like the idea of having to do my own buffering to get the
> best performance however.
> 
One good idea, which unfortunately seems to be a bit difficult to integrate 
into today's Linux, is to delay block allocation until you have to write
you buffers to disk. I.e., you know that the block should go to this file on 
that disk, but you don't know where, and you don't care until bdflush() or 
sync() comes along and actually schedules the write.
At that time you can grab a hopefully-contiguous bunch of disk blocks for
the file / files, and update the directory.
Added benefit: If the file disappears, the block can be dropped.

>   This doesn't mean that I agree that BSD FFS is the best to shoot for,
> however.  Keep up the discussion -- I'd like to see more filesystem
> innovations get tried on the smaller systems (Linux, *BSD) where we can
> look at them, instead of only reading someone's paper about their one-
> shot implementation.

100% agreement here. FFS is especially interesting for portability reasons.

Oh yes, one problem: the partitioning issue. Since *BSD uses their own
partition layout, hiding many file systems in one "real" partition (or
on the whole disk), the current in-kernel way to identify and cache inodes
by their inode and device numbers doesn't work any more. I think the Xenix
file system has the same problem.
This is fixable most easily by using indirection through the superblock.
The kernel sources on the Yggdrasil CD-ROM already have appropriate patches; 
I don't know what Linus' plans are here but I'd like to see that change
in the "standard" kernel.

-- 
I didn't know it was impossible when I did it.
-- 
Matthias Urlichs        \ XLink-POP Nürnberg   | EMail: urlichs@smurf.sub.org
Schleiermacherstraße 12  \  Unix+Linux+Mac     | Phone: ...please use email.
90491 Nürnberg (Germany)  \   Consulting+Networking+Programming+etc'ing      42

------------------------------

From: umlin000@ccu.umanitoba.ca (Zhuo Er Lin)
Subject: Re: ftp can't upload ....
Date: Sun, 21 Nov 1993 16:16:52 GMT

In <1993Nov20.230512.6811@msus1.msus.edu> volkerdi@mhd1.moorhead.msus.edu (Patrick J. Volkerding) writes:

>In article <CGtqD5.7Bp@ccu.umanitoba.ca> umlin000@ccu.umanitoba.ca (Zhuo Er Lin) writes:
>>I am using ftp program from slackware 1.0
>>
>>When I run PPP, I can download files at appromitely 1.3K - 1.4K cps.
>>
>>But I can't 'put or mput' files. 
>>
>>ftp always says 'bad directory compoents'.  What's this? Note I was
>>upload a file, not directory.

>This is a pretty well known bug. Since this comes up from time to time,
                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Exactly!  2 hours later I tried again and it works w/o problem. 
sigh....


>I'll add it to the Slackware FAQ.

>Here's the workaround:

>mput ./*

>---
>Patrick Volkerding
>volkerdi@mhd1.moorhead.msus.edu

-- 
========================================================================
|  Eric Lin                        Voice:   (204) 783-2884             |
|    Computer Engineering      FAX Modem:   (204) 783-2884             |
|    University of Manitoba     Internet:   Umlin000@cc.Umanitoba.CA   |

------------------------------

From: naddy@mips.ruessel.sub.org (Christian Weisgerber)
Subject: Re: Default shell on login
Date: 20 Nov 1993 19:54:12 +0100

koch@rtsg.mot.com (Clifton Koch) writes:

> koch:*:2571:19::/home/koch:/bin/bash
>   It appears that bash is not getting run at login because my .bashrc is
> not being executed.

Login shells don't execute .bashrc by default.

Include something like

if [ "`basename $SHELL`" = bash -a -f $HOME/.bashrc ]; then
  . ~/profile
fi

in your ~/.profile.

-- 
Christian 'naddy' Weisgerber, Germany              naddy@ruessel.sub.org

------------------------------

Subject: Re: Linux and Yellow Pages
From: dmollo@odie.santarosa.edu (Dustin Mollo)
Date: 20 Nov 93 21:48:27 PST

Edwin Ramirez (ramirez@mchip00.med.nyu.edu) wrote:
: Hello all,

:       I would like to run yellow pages on my linux machine, has this been
: ported to linux yet?  Where can I find it (bind, yp,...)

: Thanks
: Edwin Ramirez

I would also be interested in running Yellow Pages or NIX as it is now
referred to..  I run NFS on a Linux Development host right now, and it would
be nice to intergrate NIS along with NFS to keep better track of things. 
Thanks in advance..  :)

-Dustin
SRJC Computing Services
dustin@cs.santarosa.edu
dmollo@odie.santarosa.edu
root@mothra.santarosa.edu

------------------------------


** FOR YOUR REFERENCE **

The service address, to which questions about the list itself and requests
to be added to or deleted from it should be directed, is:

    Internet: Linux-Admin-Request@NEWS-DIGESTS.MIT.EDU

You can send mail to the entire list (and comp.os.linux.admin) via:

    Internet: Linux-Admin@NEWS-DIGESTS.MIT.EDU

Linux may be obtained via one of these FTP sites:
    nic.funet.fi				pub/OS/Linux
    tsx-11.mit.edu				pub/linux
    sunsite.unc.edu				pub/Linux

End of Linux-Admin Digest
******************************
